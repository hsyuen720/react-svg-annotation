/*! For license information please see main.c7db4e68.iframe.bundle.js.LICENSE.txt */
(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{"./.storybook/preview.cjs-generated-config-entry.js":function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);var preview_namespaceObject={};__webpack_require__.r(preview_namespaceObject),__webpack_require__.d(preview_namespaceObject,"parameters",(function(){return parameters}));__webpack_require__("./node_modules/core-js/modules/es.object.keys.js"),__webpack_require__("./node_modules/core-js/modules/es.symbol.js"),__webpack_require__("./node_modules/core-js/modules/es.array.filter.js"),__webpack_require__("./node_modules/core-js/modules/es.object.get-own-property-descriptor.js"),__webpack_require__("./node_modules/core-js/modules/es.array.for-each.js"),__webpack_require__("./node_modules/core-js/modules/web.dom-collections.for-each.js"),__webpack_require__("./node_modules/core-js/modules/es.object.get-own-property-descriptors.js"),__webpack_require__("./node_modules/core-js/modules/es.object.define-properties.js"),__webpack_require__("./node_modules/core-js/modules/es.object.define-property.js");var ClientApi=__webpack_require__("./node_modules/@storybook/client-api/dist/esm/ClientApi.js");const parameters={actions:{argTypesRegex:"^on[A-Z].*"},controls:{matchers:{color:/(background|color)$/i,date:/Date$/}}};function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}))),keys.push.apply(keys,symbols)}return keys}function _defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}Object.keys(preview_namespaceObject).forEach((function(key){var value=preview_namespaceObject[key];switch(key){case"args":return Object(ClientApi.d)(value);case"argTypes":return Object(ClientApi.b)(value);case"decorators":return value.forEach((function(decorator){return Object(ClientApi.f)(decorator,!1)}));case"loaders":return value.forEach((function(loader){return Object(ClientApi.g)(loader,!1)}));case"parameters":return Object(ClientApi.h)(function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?ownKeys(Object(source),!0).forEach((function(key){_defineProperty(target,key,source[key])})):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):ownKeys(Object(source)).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}return target}({},value),!1);case"argTypesEnhancers":return value.forEach((function(enhancer){return Object(ClientApi.c)(enhancer)}));case"argsEnhancers":return value.forEach((function(enhancer){return Object(ClientApi.e)(enhancer)}));case"render":return Object(ClientApi.i)(value);case"globals":case"globalTypes":var v={};return v[key]=value,Object(ClientApi.h)(v,!1);case"__namedExportsOrder":case"decorateStory":case"renderToDOM":return null;default:return console.log(key+" was not supported :( !")}}))},"./generated-stories-entry.js":function(module,exports,__webpack_require__){"use strict";(function(module){(0,__webpack_require__("./node_modules/@storybook/react/dist/esm/client/index.js").configure)([__webpack_require__("./src sync recursive ^\\.(?:(?:^|\\/|(?:(?:(?!(?:^|\\/)\\.).)*?)\\/)(?!\\.)(?=.)[^/]*?\\.stories\\.mdx)$"),__webpack_require__("./src sync recursive ^\\.(?:(?:^|\\/|(?:(?:(?!(?:^|\\/)\\.).)*?)\\/)(?!\\.)(?=.)[^/]*?\\.stories\\.(js|jsx|ts|tsx))$")],module,!1)}).call(this,__webpack_require__("./node_modules/webpack/buildin/module.js")(module))},"./src sync recursive ^\\.(?:(?:^|\\/|(?:(?:(?!(?:^|\\/)\\.).)*?)\\/)(?!\\.)(?=.)[^/]*?\\.stories\\.(js|jsx|ts|tsx))$":function(module,exports,__webpack_require__){var map={"./stories/svgAnnotation.stories.tsx":"./src/stories/svgAnnotation.stories.tsx"};function webpackContext(req){var id=webpackContextResolve(req);return __webpack_require__(id)}function webpackContextResolve(req){if(!__webpack_require__.o(map,req)){var e=new Error("Cannot find module '"+req+"'");throw e.code="MODULE_NOT_FOUND",e}return map[req]}webpackContext.keys=function webpackContextKeys(){return Object.keys(map)},webpackContext.resolve=webpackContextResolve,module.exports=webpackContext,webpackContext.id="./src sync recursive ^\\.(?:(?:^|\\/|(?:(?:(?!(?:^|\\/)\\.).)*?)\\/)(?!\\.)(?=.)[^/]*?\\.stories\\.(js|jsx|ts|tsx))$"},"./src sync recursive ^\\.(?:(?:^|\\/|(?:(?:(?!(?:^|\\/)\\.).)*?)\\/)(?!\\.)(?=.)[^/]*?\\.stories\\.mdx)$":function(module,exports){function webpackEmptyContext(req){var e=new Error("Cannot find module '"+req+"'");throw e.code="MODULE_NOT_FOUND",e}webpackEmptyContext.keys=function(){return[]},webpackEmptyContext.resolve=webpackEmptyContext,module.exports=webpackEmptyContext,webpackEmptyContext.id="./src sync recursive ^\\.(?:(?:^|\\/|(?:(?:(?!(?:^|\\/)\\.).)*?)\\/)(?!\\.)(?=.)[^/]*?\\.stories\\.mdx)$"},"./src/stories/svgAnnotation.stories.tsx":function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"Basic",(function(){return Basic})),__webpack_require__.d(__webpack_exports__,"CustomBackground",(function(){return CustomBackground}));__webpack_require__("./node_modules/core-js/modules/es.object.assign.js"),__webpack_require__("./node_modules/core-js/modules/es.function.bind.js"),__webpack_require__("./node_modules/core-js/modules/es.promise.js"),__webpack_require__("./node_modules/core-js/modules/es.object.to-string.js"),__webpack_require__("./node_modules/core-js/modules/es.array.map.js"),__webpack_require__("./node_modules/core-js/modules/es.object.define-property.js"),__webpack_require__("./node_modules/core-js/modules/es.symbol.js"),__webpack_require__("./node_modules/core-js/modules/es.symbol.description.js"),__webpack_require__("./node_modules/core-js/modules/es.symbol.iterator.js"),__webpack_require__("./node_modules/core-js/modules/es.string.iterator.js"),__webpack_require__("./node_modules/core-js/modules/es.array.iterator.js"),__webpack_require__("./node_modules/core-js/modules/web.dom-collections.iterator.js"),__webpack_require__("./node_modules/core-js/modules/es.symbol.async-iterator.js"),__webpack_require__("./node_modules/core-js/modules/es.symbol.to-string-tag.js"),__webpack_require__("./node_modules/core-js/modules/es.math.to-string-tag.js"),__webpack_require__("./node_modules/core-js/modules/es.json.to-string-tag.js"),__webpack_require__("./node_modules/core-js/modules/es.object.create.js"),__webpack_require__("./node_modules/core-js/modules/es.object.get-prototype-of.js"),__webpack_require__("./node_modules/core-js/modules/es.array.for-each.js"),__webpack_require__("./node_modules/core-js/modules/web.dom-collections.for-each.js"),__webpack_require__("./node_modules/core-js/modules/es.function.name.js"),__webpack_require__("./node_modules/core-js/modules/es.object.set-prototype-of.js"),__webpack_require__("./node_modules/core-js/modules/es.array.reverse.js"),__webpack_require__("./node_modules/core-js/modules/es.array.slice.js");var _templateObject,_templateObject2,_templateObject3,_templateObject4,_templateObject5,_templateObject6,_templateObject7,react=__webpack_require__("./node_modules/react/index.js"),emotion_styled_browser_esm=__webpack_require__("./node_modules/@emotion/styled/dist/emotion-styled.browser.esm.js");function _taggedTemplateLiteralLoose(strings,raw){return raw||(raw=strings.slice(0)),strings.raw=raw,strings}var _ImageExtension,_CanvasImageMap,ImageType,Container=emotion_styled_browser_esm.a.div(_templateObject||(_templateObject=_taggedTemplateLiteralLoose(["\n  font-size: 15px;\n  width: ",";\n  display: flex;\n  flex-direction: column;\n  gap: 0.25em;\n"])),(function(props){return props.width+"px"})),Toolbar=emotion_styled_browser_esm.a.div(_templateObject2||(_templateObject2=_taggedTemplateLiteralLoose(["\n  display: flex;\n  flex-direction: row;\n  gap: 0.25em;\n"]))),ToolbarButton=emotion_styled_browser_esm.a.button(_templateObject3||(_templateObject3=_taggedTemplateLiteralLoose(["\n  font-size: 0.8em;\n  border-radius: 0.5em;\n  border: none;\n  background-color: ",";\n  color: white;\n  border: none;\n  padding: 0.5em 0.75em;\n  cursor: pointer;\n  transition: all 250ms ease-in-out;\n"])),(function(props){return props.isActive?"#2A9D8F":"#264653"})),ToolbarDropDown=emotion_styled_browser_esm.a.div(_templateObject4||(_templateObject4=_taggedTemplateLiteralLoose(["\n  margin-left: auto;\n  position: relative;\n"]))),ToolbarDropDownMenu=emotion_styled_browser_esm.a.div(_templateObject5||(_templateObject5=_taggedTemplateLiteralLoose(["\n  position: absolute;\n  width: 100%;\n  z-index: 100;\n  background-color: white;\n  margin-top: 0.5em;\n  display: flex;\n  flex-direction: column;\n  gap: 0.25em;\n  transition: 100ms all ease;\n  opacity: ",";\n  visibility: ",";\n  border-radius: 0.25em;\n"])),(function(props){return props.isOpen?1:0}),(function(props){return props.isOpen?"visible":"hidden"})),ToolbarDropdownMenuItem=emotion_styled_browser_esm.a.div(_templateObject6||(_templateObject6=_taggedTemplateLiteralLoose(["\n  cursor: pointer;\n  padding: 0.25em;\n  text-align: center;\n  border-radius: inherit;\n  &:hover {\n    background-color: #264653;\n    color: white;\n  }\n"]))),AnnotationContainer=emotion_styled_browser_esm.a.div(_templateObject7||(_templateObject7=_taggedTemplateLiteralLoose(["\n  width: ",";\n  height: ",";\n  background-size: ",";\n  background-position: ",";\n  background-image: ",";\n  background-repeat: ",";\n"])),(function(props){return props.width+"px"}),(function(props){return props.height+"px"}),(function(props){return props.background?"contain":"20px 20px"}),(function(props){return props.background?"center":"unset"}),(function(props){return props.background?"url("+props.background+")":"radial-gradient(circle, #7d7d7d 1px, transparent 1px)"}),(function(props){return props.background?"no-repeat":"repeat"}));try{Container.displayName="Container",Container.__docgenInfo={description:"",displayName:"Container",props:{theme:{defaultValue:null,description:"",name:"theme",required:!1,type:{name:"Theme"}},as:{defaultValue:null,description:"",name:"as",required:!1,type:{name:"ElementType<any>"}},width:{defaultValue:null,description:"",name:"width",required:!0,type:{name:"number"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/svgAnnotation/styles.tsx#Container"]={docgenInfo:Container.__docgenInfo,name:"Container",path:"src/components/svgAnnotation/styles.tsx#Container"})}catch(__react_docgen_typescript_loader_error){}try{Toolbar.displayName="Toolbar",Toolbar.__docgenInfo={description:"",displayName:"Toolbar",props:{theme:{defaultValue:null,description:"",name:"theme",required:!1,type:{name:"Theme"}},as:{defaultValue:null,description:"",name:"as",required:!1,type:{name:"ElementType<any>"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/svgAnnotation/styles.tsx#Toolbar"]={docgenInfo:Toolbar.__docgenInfo,name:"Toolbar",path:"src/components/svgAnnotation/styles.tsx#Toolbar"})}catch(__react_docgen_typescript_loader_error){}try{ToolbarButton.displayName="ToolbarButton",ToolbarButton.__docgenInfo={description:"",displayName:"ToolbarButton",props:{theme:{defaultValue:null,description:"",name:"theme",required:!1,type:{name:"Theme"}},as:{defaultValue:null,description:"",name:"as",required:!1,type:{name:"ElementType<any>"}},isActive:{defaultValue:null,description:"",name:"isActive",required:!1,type:{name:"boolean"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/svgAnnotation/styles.tsx#ToolbarButton"]={docgenInfo:ToolbarButton.__docgenInfo,name:"ToolbarButton",path:"src/components/svgAnnotation/styles.tsx#ToolbarButton"})}catch(__react_docgen_typescript_loader_error){}try{ToolbarDropDown.displayName="ToolbarDropDown",ToolbarDropDown.__docgenInfo={description:"",displayName:"ToolbarDropDown",props:{theme:{defaultValue:null,description:"",name:"theme",required:!1,type:{name:"Theme"}},as:{defaultValue:null,description:"",name:"as",required:!1,type:{name:"ElementType<any>"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/svgAnnotation/styles.tsx#ToolbarDropDown"]={docgenInfo:ToolbarDropDown.__docgenInfo,name:"ToolbarDropDown",path:"src/components/svgAnnotation/styles.tsx#ToolbarDropDown"})}catch(__react_docgen_typescript_loader_error){}try{ToolbarDropDownMenu.displayName="ToolbarDropDownMenu",ToolbarDropDownMenu.__docgenInfo={description:"",displayName:"ToolbarDropDownMenu",props:{theme:{defaultValue:null,description:"",name:"theme",required:!1,type:{name:"Theme"}},as:{defaultValue:null,description:"",name:"as",required:!1,type:{name:"ElementType<any>"}},isOpen:{defaultValue:null,description:"",name:"isOpen",required:!0,type:{name:"boolean"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/svgAnnotation/styles.tsx#ToolbarDropDownMenu"]={docgenInfo:ToolbarDropDownMenu.__docgenInfo,name:"ToolbarDropDownMenu",path:"src/components/svgAnnotation/styles.tsx#ToolbarDropDownMenu"})}catch(__react_docgen_typescript_loader_error){}try{ToolbarDropdownMenuItem.displayName="ToolbarDropdownMenuItem",ToolbarDropdownMenuItem.__docgenInfo={description:"",displayName:"ToolbarDropdownMenuItem",props:{theme:{defaultValue:null,description:"",name:"theme",required:!1,type:{name:"Theme"}},as:{defaultValue:null,description:"",name:"as",required:!1,type:{name:"ElementType<any>"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/svgAnnotation/styles.tsx#ToolbarDropdownMenuItem"]={docgenInfo:ToolbarDropdownMenuItem.__docgenInfo,name:"ToolbarDropdownMenuItem",path:"src/components/svgAnnotation/styles.tsx#ToolbarDropdownMenuItem"})}catch(__react_docgen_typescript_loader_error){}try{AnnotationContainer.displayName="AnnotationContainer",AnnotationContainer.__docgenInfo={description:"",displayName:"AnnotationContainer",props:{theme:{defaultValue:null,description:"",name:"theme",required:!1,type:{name:"Theme"}},as:{defaultValue:null,description:"",name:"as",required:!1,type:{name:"ElementType<any>"}},width:{defaultValue:null,description:"",name:"width",required:!0,type:{name:"number"}},height:{defaultValue:null,description:"",name:"height",required:!0,type:{name:"number"}},background:{defaultValue:null,description:"",name:"background",required:!1,type:{name:"string"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/svgAnnotation/styles.tsx#AnnotationContainer"]={docgenInfo:AnnotationContainer.__docgenInfo,name:"AnnotationContainer",path:"src/components/svgAnnotation/styles.tsx#AnnotationContainer"})}catch(__react_docgen_typescript_loader_error){}!function(ImageType){ImageType.SVG="svg",ImageType.PNG="png",ImageType.JPG="jpg"}(ImageType||(ImageType={}));var Tools,Command,ImageExtension=((_ImageExtension={})[ImageType.SVG]=".svg",_ImageExtension[ImageType.PNG]=".png",_ImageExtension[ImageType.JPG]=".jpg",_ImageExtension),CanvasImageMap=((_CanvasImageMap={})[ImageType.PNG]="image/png",_CanvasImageMap[ImageType.JPG]="image/jpg",_CanvasImageMap);!function(Tools){Tools[Tools.Pointer=0]="Pointer",Tools[Tools.Eraser=1]="Eraser",Tools[Tools.Pen=2]="Pen",Tools[Tools.Rectangle=3]="Rectangle",Tools[Tools.Ellipse=4]="Ellipse"}(Tools||(Tools={})),function(Command){Command.Move="M",Command.RelativeMove="m",Command.Line="L",Command.RelativeLine="l",Command.HorizontalLine="H",Command.RelativeHorizontalLine="h",Command.VerticalLine="V",Command.RelativeVerticalLine="v",Command.CubicCurve="C",Command.RelativeCubicCurve="c",Command.QuadraticCurve="Q",Command.RelativeQuadraticCurve="q",Command.SmoothQuadraticCurve="T",Command.RelativeSmoothQuadraticCurve="t",Command.EllipticalCurve="A",Command.RelativeEllipticalCurve="a",Command.ClosePath="Z"}(Command||(Command={}));__webpack_require__("./node_modules/core-js/modules/es.array.is-array.js"),__webpack_require__("./node_modules/core-js/modules/es.array.from.js");function _slicedToArray(arr,i){return function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}(arr)||function _iterableToArrayLimit(arr,i){var _i=null==arr?null:"undefined"!=typeof Symbol&&arr[Symbol.iterator]||arr["@@iterator"];if(null!=_i){var _s,_e,_x,_r,_arr=[],_n=!0,_d=!1;try{if(_x=(_i=_i.call(arr)).next,0===i){if(Object(_i)!==_i)return;_n=!1}else for(;!(_n=(_s=_x.call(_i)).done)&&(_arr.push(_s.value),_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{if(!_n&&null!=_i.return&&(_r=_i.return(),Object(_r)!==_r))return}finally{if(_d)throw _e}}return _arr}}(arr,i)||function _unsupportedIterableToArray(o,minLen){if(!o)return;if("string"==typeof o)return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray(o,minLen)}(arr,i)||function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}var hooks_useOutsideClick=function useOutsideClick(handler){var _useState2=_slicedToArray(Object(react.useState)(!1),2),isOpen=_useState2[0],setIsOpen=_useState2[1],el=Object(react.useRef)(null),open=Object(react.useCallback)((function(){return setIsOpen(!0)}),[]),close=Object(react.useCallback)((function(){return setIsOpen(!1)}),[]),toggle=Object(react.useCallback)((function(){return setIsOpen((function(prev){return!prev}))}),[]);return Object(react.useEffect)((function(){var handleOutsideClick=function handleOutsideClick(e){var _el$current;!isOpen||null!==(_el$current=el.current)&&void 0!==_el$current&&_el$current.contains(e.target)||(close(),null==handler||handler())};return window.addEventListener("mousedown",handleOutsideClick),window.addEventListener("touchstart",handleOutsideClick),function(){window.removeEventListener("mousedown",handleOutsideClick),window.removeEventListener("touchstart",handleOutsideClick)}}),[handler,isOpen,close]),Object(react.useMemo)((function(){return{el:el,isOpen:isOpen,open:open,close:close,toggle:toggle}}),[isOpen,open,close,toggle])},immer_esm=(__webpack_require__("./node_modules/core-js/modules/web.url.js"),__webpack_require__("./node_modules/core-js/modules/es.array.find.js"),__webpack_require__("./node_modules/core-js/modules/es.array.find-index.js"),__webpack_require__("./node_modules/core-js/modules/es.array.splice.js"),__webpack_require__("./node_modules/immer/dist/immer.esm.js")),uniqid=(__webpack_require__("./node_modules/core-js/modules/es.array.join.js"),__webpack_require__("./node_modules/uniqid/index.js")),uniqid_default=__webpack_require__.n(uniqid),hooks_useAnnotationCore=function useAnnotationCore(ref){var getCTMPoint=Object(react.useCallback)((function(x,y){var _ref$current,ctm=null===(_ref$current=ref.current)||void 0===_ref$current?void 0:_ref$current.getScreenCTM();return ctm?{x:(x-ctm.e)/ctm.a,y:(y-ctm.f)/ctm.d}:{x:x,y:y}}),[ref]);return{getCurrentPosition:Object(react.useCallback)((function(e){var point={x:0,y:0};if(e.nativeEvent instanceof MouseEvent)point=getCTMPoint(e.nativeEvent.clientX,e.nativeEvent.clientY);else if(e.nativeEvent instanceof TouchEvent){var touch=e.nativeEvent.touches[0];point=getCTMPoint(touch.clientX,touch.clientY)}return point}),[getCTMPoint]),getShapeControl:Object(react.useCallback)((function(el){var box=el.getBoundingClientRect(),origin=getCTMPoint(box.x,box.y);return{x:origin.x+box.width+10,y:origin.y+box.height+10}}),[getCTMPoint]),getId:Object(react.useCallback)((function(){return uniqid_default()("svg-")}),[])}};function useDrawing_slicedToArray(arr,i){return function useDrawing_arrayWithHoles(arr){if(Array.isArray(arr))return arr}(arr)||function useDrawing_iterableToArrayLimit(arr,i){var _i=null==arr?null:"undefined"!=typeof Symbol&&arr[Symbol.iterator]||arr["@@iterator"];if(null!=_i){var _s,_e,_x,_r,_arr=[],_n=!0,_d=!1;try{if(_x=(_i=_i.call(arr)).next,0===i){if(Object(_i)!==_i)return;_n=!1}else for(;!(_n=(_s=_x.call(_i)).done)&&(_arr.push(_s.value),_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{if(!_n&&null!=_i.return&&(_r=_i.return(),Object(_r)!==_r))return}finally{if(_d)throw _e}}return _arr}}(arr,i)||function useDrawing_unsupportedIterableToArray(o,minLen){if(!o)return;if("string"==typeof o)return useDrawing_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return useDrawing_arrayLikeToArray(o,minLen)}(arr,i)||function useDrawing_nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function useDrawing_arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}var hooks_useDrawing=function useDrawing(ref,styleOption){var _useAnnotationCore=hooks_useAnnotationCore(ref),getCurrentPosition=_useAnnotationCore.getCurrentPosition,getId=_useAnnotationCore.getId,_useState2=useDrawing_slicedToArray(Object(react.useState)(!1),2),isDrawing=_useState2[0],setIsDrawing=_useState2[1],_useState4=useDrawing_slicedToArray(Object(react.useState)([]),2),drawingPoint=_useState4[0],setDrawingPoint=_useState4[1],currentPath=Object(react.useMemo)((function(){var _styleOption$color,_styleOption$lineWidt,_styleOption$fillColo;if(drawingPoint.length<=1)return null;var commands=drawingPoint.map((function(point,index){return(0===index?Command.Move:Command.Line)+" "+point.x+" "+point.y}));return{id:"tempId",tool:Tools.Pen,data:{d:commands.join(" "),stroke:null!==(_styleOption$color=null==styleOption?void 0:styleOption.color)&&void 0!==_styleOption$color?_styleOption$color:"black",strokeWidth:null!==(_styleOption$lineWidt=null==styleOption?void 0:styleOption.lineWidth)&&void 0!==_styleOption$lineWidt?_styleOption$lineWidt:5,fill:null!==(_styleOption$fillColo=null==styleOption?void 0:styleOption.fillColor)&&void 0!==_styleOption$fillColo?_styleOption$fillColo:"transparent",strokeLinecap:"round",strokeLinejoin:"round"}}}),[drawingPoint,styleOption]),onDrawStart=Object(react.useCallback)((function(){return setIsDrawing(!0)}),[]),onDrawProceed=Object(react.useCallback)((function(e){if(isDrawing){var point=getCurrentPosition(e);setDrawingPoint(Object(immer_esm.a)((function(draft){draft.push(point)})))}}),[isDrawing,getCurrentPosition]),onDrawEnd=Object(react.useCallback)((function(callback){isDrawing&&(currentPath&&callback(Object.assign({},currentPath,{id:getId()})),setDrawingPoint([]),setIsDrawing(!1))}),[isDrawing,currentPath,getId]),clearDrawing=Object(react.useCallback)((function(){setDrawingPoint([]),setIsDrawing(!1)}),[]);return{currentPath:currentPath,onDrawStart:onDrawStart,onDrawProceed:onDrawProceed,onDrawEnd:onDrawEnd,clearDrawing:clearDrawing}};__webpack_require__("./node_modules/core-js/modules/es.string.starts-with.js");function useShape_slicedToArray(arr,i){return function useShape_arrayWithHoles(arr){if(Array.isArray(arr))return arr}(arr)||function useShape_iterableToArrayLimit(arr,i){var _i=null==arr?null:"undefined"!=typeof Symbol&&arr[Symbol.iterator]||arr["@@iterator"];if(null!=_i){var _s,_e,_x,_r,_arr=[],_n=!0,_d=!1;try{if(_x=(_i=_i.call(arr)).next,0===i){if(Object(_i)!==_i)return;_n=!1}else for(;!(_n=(_s=_x.call(_i)).done)&&(_arr.push(_s.value),_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{if(!_n&&null!=_i.return&&(_r=_i.return(),Object(_r)!==_r))return}finally{if(_d)throw _e}}return _arr}}(arr,i)||function useShape_unsupportedIterableToArray(o,minLen){if(!o)return;if("string"==typeof o)return useShape_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return useShape_arrayLikeToArray(o,minLen)}(arr,i)||function useShape_nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function useShape_arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}var hooks_useShape=function useShape(ref,styleOption){var _useAnnotationCore=hooks_useAnnotationCore(ref),getCurrentPosition=_useAnnotationCore.getCurrentPosition,getShapeControl=_useAnnotationCore.getShapeControl,getId=_useAnnotationCore.getId,_useState2=useShape_slicedToArray(Object(react.useState)(null),2),actionType=_useState2[0],setActionType=_useState2[1],_useState4=useShape_slicedToArray(Object(react.useState)(null),2),currentShape=_useState4[0],setCurrentShape=_useState4[1],_useState6=useShape_slicedToArray(Object(react.useState)(null),2),originalShape=_useState6[0],setOriginalShape=_useState6[1],_useState8=useShape_slicedToArray(Object(react.useState)(null),2),shapeControl=_useState8[0],setShapeControl=_useState8[1],_useState10=useShape_slicedToArray(Object(react.useState)(null),2),refPoint=_useState10[0],setRefPoint=_useState10[1],addShape=Object(react.useCallback)((function(e,tool){var _styleOption$color,_styleOption$lineWidt,_styleOption$fillColo,point=getCurrentPosition(e),id=getId(),styles={stroke:null!==(_styleOption$color=null==styleOption?void 0:styleOption.color)&&void 0!==_styleOption$color?_styleOption$color:"black",strokeWidth:null!==(_styleOption$lineWidt=null==styleOption?void 0:styleOption.lineWidth)&&void 0!==_styleOption$lineWidt?_styleOption$lineWidt:5,fill:null!==(_styleOption$fillColo=null==styleOption?void 0:styleOption.fillColor)&&void 0!==_styleOption$fillColo?_styleOption$fillColo:"transparent"};return tool===Tools.Rectangle?{id:id,tool:tool,data:Object.assign({},styles,{x:point.x,y:point.y,width:50,height:50})}:tool===Tools.Ellipse?{id:id,tool:tool,data:Object.assign({},styles,{cx:point.x,cy:point.y,rx:50,ry:50})}:null}),[getCurrentPosition,getId,styleOption]),controlShape=Object(react.useCallback)((function(e){if(null!==actionType&&currentShape){var currentPosition=getCurrentPosition(e);setCurrentShape(Object(immer_esm.a)((function(draft){if(draft)if("move"===actionType){var _refPoint$x,_refPoint$y,translateX=currentPosition.x-(null!==(_refPoint$x=null==refPoint?void 0:refPoint.x)&&void 0!==_refPoint$x?_refPoint$x:0),translateY=currentPosition.y-(null!==(_refPoint$y=null==refPoint?void 0:refPoint.y)&&void 0!==_refPoint$y?_refPoint$y:0);draft.tool===Tools.Ellipse?(draft.data.cx=translateX,draft.data.cy=translateY):draft.tool===Tools.Rectangle?(draft.data.x=translateX,draft.data.y=translateY):draft.tool===Tools.Pen&&(draft.data.transform="translate("+translateX+","+translateY+")")}else if("resize"===actionType&&originalShape){var _refPoint$x2,_refPoint$y2,offsetX=currentPosition.x-(null!==(_refPoint$x2=null==refPoint?void 0:refPoint.x)&&void 0!==_refPoint$x2?_refPoint$x2:0),offsetY=currentPosition.y-(null!==(_refPoint$y2=null==refPoint?void 0:refPoint.y)&&void 0!==_refPoint$y2?_refPoint$y2:0);draft.tool===Tools.Rectangle&&originalShape.tool===Tools.Rectangle?(draft.data.width=originalShape.data.width+offsetX,draft.data.height=originalShape.data.height+offsetY):draft.tool===Tools.Ellipse&&originalShape.tool===Tools.Ellipse&&(draft.data.rx=originalShape.data.rx+offsetX,draft.data.ry=originalShape.data.ry+offsetY)}}))),setShapeControl(Object(immer_esm.a)((function(draft){null!=draft&&draft.offset&&(draft.translate={x:currentPosition.x-draft.offset.x,y:currentPosition.y-draft.offset.y})})))}}),[actionType,currentShape,getCurrentPosition,refPoint,originalShape]),getShapeOffsetPoint=Object(react.useCallback)((function(targetShape,current){var shapeX=null,shapeY=null;if(targetShape.tool===Tools.Ellipse)shapeX=targetShape.data.cx,shapeY=targetShape.data.cy;else if(targetShape.tool===Tools.Rectangle)shapeX=targetShape.data.x,shapeY=targetShape.data.y;else if(targetShape.tool==Tools.Pen){var _offset$matrix$e,_offset$matrix$f,el=document.querySelector("#"+targetShape.id),offset=null==el?void 0:el.transform.baseVal.consolidate();shapeX=null!==(_offset$matrix$e=null==offset?void 0:offset.matrix.e)&&void 0!==_offset$matrix$e?_offset$matrix$e:0,shapeY=null!==(_offset$matrix$f=null==offset?void 0:offset.matrix.f)&&void 0!==_offset$matrix$f?_offset$matrix$f:0}return null!==shapeX&&null!==shapeY?{x:current.x-shapeX,y:current.y-shapeY}:null}),[]),focusShape=Object(react.useCallback)((function(e,get){var _get,el=e.target,currentPosition=getCurrentPosition(e),targetShape=currentShape;el.id.startsWith("svg-")&&el.id!==(null==currentShape?void 0:currentShape.id)&&(targetShape=null!==(_get=get(el.id))&&void 0!==_get?_get:null,setCurrentShape(targetShape),setOriginalShape(targetShape));if(null===actionType&&targetShape){var newAction=el.id===targetShape.id?"move":"shapeControl"===el.id?"resize":null;if(null!==newAction&&setRefPoint("move"===newAction?getShapeOffsetPoint(targetShape,currentPosition):currentPosition),setActionType(newAction),targetShape.tool!==Tools.Pen){var shapeEl=document.querySelector("#"+targetShape.id);if(shapeEl){var _shapeControl=getShapeControl(shapeEl);setShapeControl(Object(immer_esm.a)({point:_shapeControl},(function(draft){if(draft){var _draft$translate$x,_draft$translate,_draft$translate$y,_draft$translate2,transform=document.createElementNS("http://www.w3.org/2000/svg","svg").createSVGTransform();transform.setTranslate(null!==(_draft$translate$x=null===(_draft$translate=draft.translate)||void 0===_draft$translate?void 0:_draft$translate.x)&&void 0!==_draft$translate$x?_draft$translate$x:0,null!==(_draft$translate$y=null===(_draft$translate2=draft.translate)||void 0===_draft$translate2?void 0:_draft$translate2.y)&&void 0!==_draft$translate$y?_draft$translate$y:0),draft.offset={x:currentPosition.x-transform.matrix.e,y:currentPosition.y-transform.matrix.f}}})))}}else setShapeControl(null)}}),[currentShape,getShapeControl,actionType,getCurrentPosition,getShapeOffsetPoint]),clearShape=Object(react.useCallback)((function(callback){callback?null!==actionType&&currentShape&&(callback(currentShape),setOriginalShape(currentShape),setActionType(null)):(setCurrentShape(null),setOriginalShape(null),setShapeControl(null),setRefPoint(null),setActionType(null))}),[actionType,currentShape]);return{currentShape:currentShape,shapeControl:shapeControl,addShape:addShape,controlShape:controlShape,focusShape:focusShape,clearShape:clearShape}};function _regeneratorRuntime(){_regeneratorRuntime=function _regeneratorRuntime(){return exports};var exports={},Op=Object.prototype,hasOwn=Op.hasOwnProperty,defineProperty=Object.defineProperty||function(obj,key,desc){obj[key]=desc.value},$Symbol="function"==typeof Symbol?Symbol:{},iteratorSymbol=$Symbol.iterator||"@@iterator",asyncIteratorSymbol=$Symbol.asyncIterator||"@@asyncIterator",toStringTagSymbol=$Symbol.toStringTag||"@@toStringTag";function define(obj,key,value){return Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}),obj[key]}try{define({},"")}catch(err){define=function define(obj,key,value){return obj[key]=value}}function wrap(innerFn,outerFn,self,tryLocsList){var protoGenerator=outerFn&&outerFn.prototype instanceof Generator?outerFn:Generator,generator=Object.create(protoGenerator.prototype),context=new Context(tryLocsList||[]);return defineProperty(generator,"_invoke",{value:makeInvokeMethod(innerFn,self,context)}),generator}function tryCatch(fn,obj,arg){try{return{type:"normal",arg:fn.call(obj,arg)}}catch(err){return{type:"throw",arg:err}}}exports.wrap=wrap;var ContinueSentinel={};function Generator(){}function GeneratorFunction(){}function GeneratorFunctionPrototype(){}var IteratorPrototype={};define(IteratorPrototype,iteratorSymbol,(function(){return this}));var getProto=Object.getPrototypeOf,NativeIteratorPrototype=getProto&&getProto(getProto(values([])));NativeIteratorPrototype&&NativeIteratorPrototype!==Op&&hasOwn.call(NativeIteratorPrototype,iteratorSymbol)&&(IteratorPrototype=NativeIteratorPrototype);var Gp=GeneratorFunctionPrototype.prototype=Generator.prototype=Object.create(IteratorPrototype);function defineIteratorMethods(prototype){["next","throw","return"].forEach((function(method){define(prototype,method,(function(arg){return this._invoke(method,arg)}))}))}function AsyncIterator(generator,PromiseImpl){function invoke(method,arg,resolve,reject){var record=tryCatch(generator[method],generator,arg);if("throw"!==record.type){var result=record.arg,value=result.value;return value&&"object"==typeof value&&hasOwn.call(value,"__await")?PromiseImpl.resolve(value.__await).then((function(value){invoke("next",value,resolve,reject)}),(function(err){invoke("throw",err,resolve,reject)})):PromiseImpl.resolve(value).then((function(unwrapped){result.value=unwrapped,resolve(result)}),(function(error){return invoke("throw",error,resolve,reject)}))}reject(record.arg)}var previousPromise;defineProperty(this,"_invoke",{value:function value(method,arg){function callInvokeWithMethodAndArg(){return new PromiseImpl((function(resolve,reject){invoke(method,arg,resolve,reject)}))}return previousPromise=previousPromise?previousPromise.then(callInvokeWithMethodAndArg,callInvokeWithMethodAndArg):callInvokeWithMethodAndArg()}})}function makeInvokeMethod(innerFn,self,context){var state="suspendedStart";return function(method,arg){if("executing"===state)throw new Error("Generator is already running");if("completed"===state){if("throw"===method)throw arg;return doneResult()}for(context.method=method,context.arg=arg;;){var delegate=context.delegate;if(delegate){var delegateResult=maybeInvokeDelegate(delegate,context);if(delegateResult){if(delegateResult===ContinueSentinel)continue;return delegateResult}}if("next"===context.method)context.sent=context._sent=context.arg;else if("throw"===context.method){if("suspendedStart"===state)throw state="completed",context.arg;context.dispatchException(context.arg)}else"return"===context.method&&context.abrupt("return",context.arg);state="executing";var record=tryCatch(innerFn,self,context);if("normal"===record.type){if(state=context.done?"completed":"suspendedYield",record.arg===ContinueSentinel)continue;return{value:record.arg,done:context.done}}"throw"===record.type&&(state="completed",context.method="throw",context.arg=record.arg)}}}function maybeInvokeDelegate(delegate,context){var methodName=context.method,method=delegate.iterator[methodName];if(void 0===method)return context.delegate=null,"throw"===methodName&&delegate.iterator.return&&(context.method="return",context.arg=void 0,maybeInvokeDelegate(delegate,context),"throw"===context.method)||"return"!==methodName&&(context.method="throw",context.arg=new TypeError("The iterator does not provide a '"+methodName+"' method")),ContinueSentinel;var record=tryCatch(method,delegate.iterator,context.arg);if("throw"===record.type)return context.method="throw",context.arg=record.arg,context.delegate=null,ContinueSentinel;var info=record.arg;return info?info.done?(context[delegate.resultName]=info.value,context.next=delegate.nextLoc,"return"!==context.method&&(context.method="next",context.arg=void 0),context.delegate=null,ContinueSentinel):info:(context.method="throw",context.arg=new TypeError("iterator result is not an object"),context.delegate=null,ContinueSentinel)}function pushTryEntry(locs){var entry={tryLoc:locs[0]};1 in locs&&(entry.catchLoc=locs[1]),2 in locs&&(entry.finallyLoc=locs[2],entry.afterLoc=locs[3]),this.tryEntries.push(entry)}function resetTryEntry(entry){var record=entry.completion||{};record.type="normal",delete record.arg,entry.completion=record}function Context(tryLocsList){this.tryEntries=[{tryLoc:"root"}],tryLocsList.forEach(pushTryEntry,this),this.reset(!0)}function values(iterable){if(iterable){var iteratorMethod=iterable[iteratorSymbol];if(iteratorMethod)return iteratorMethod.call(iterable);if("function"==typeof iterable.next)return iterable;if(!isNaN(iterable.length)){var i=-1,next=function next(){for(;++i<iterable.length;)if(hasOwn.call(iterable,i))return next.value=iterable[i],next.done=!1,next;return next.value=void 0,next.done=!0,next};return next.next=next}}return{next:doneResult}}function doneResult(){return{value:void 0,done:!0}}return GeneratorFunction.prototype=GeneratorFunctionPrototype,defineProperty(Gp,"constructor",{value:GeneratorFunctionPrototype,configurable:!0}),defineProperty(GeneratorFunctionPrototype,"constructor",{value:GeneratorFunction,configurable:!0}),GeneratorFunction.displayName=define(GeneratorFunctionPrototype,toStringTagSymbol,"GeneratorFunction"),exports.isGeneratorFunction=function(genFun){var ctor="function"==typeof genFun&&genFun.constructor;return!!ctor&&(ctor===GeneratorFunction||"GeneratorFunction"===(ctor.displayName||ctor.name))},exports.mark=function(genFun){return Object.setPrototypeOf?Object.setPrototypeOf(genFun,GeneratorFunctionPrototype):(genFun.__proto__=GeneratorFunctionPrototype,define(genFun,toStringTagSymbol,"GeneratorFunction")),genFun.prototype=Object.create(Gp),genFun},exports.awrap=function(arg){return{__await:arg}},defineIteratorMethods(AsyncIterator.prototype),define(AsyncIterator.prototype,asyncIteratorSymbol,(function(){return this})),exports.AsyncIterator=AsyncIterator,exports.async=function(innerFn,outerFn,self,tryLocsList,PromiseImpl){void 0===PromiseImpl&&(PromiseImpl=Promise);var iter=new AsyncIterator(wrap(innerFn,outerFn,self,tryLocsList),PromiseImpl);return exports.isGeneratorFunction(outerFn)?iter:iter.next().then((function(result){return result.done?result.value:iter.next()}))},defineIteratorMethods(Gp),define(Gp,toStringTagSymbol,"Generator"),define(Gp,iteratorSymbol,(function(){return this})),define(Gp,"toString",(function(){return"[object Generator]"})),exports.keys=function(val){var object=Object(val),keys=[];for(var key in object)keys.push(key);return keys.reverse(),function next(){for(;keys.length;){var key=keys.pop();if(key in object)return next.value=key,next.done=!1,next}return next.done=!0,next}},exports.values=values,Context.prototype={constructor:Context,reset:function reset(skipTempReset){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(resetTryEntry),!skipTempReset)for(var name in this)"t"===name.charAt(0)&&hasOwn.call(this,name)&&!isNaN(+name.slice(1))&&(this[name]=void 0)},stop:function stop(){this.done=!0;var rootRecord=this.tryEntries[0].completion;if("throw"===rootRecord.type)throw rootRecord.arg;return this.rval},dispatchException:function dispatchException(exception){if(this.done)throw exception;var context=this;function handle(loc,caught){return record.type="throw",record.arg=exception,context.next=loc,caught&&(context.method="next",context.arg=void 0),!!caught}for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i],record=entry.completion;if("root"===entry.tryLoc)return handle("end");if(entry.tryLoc<=this.prev){var hasCatch=hasOwn.call(entry,"catchLoc"),hasFinally=hasOwn.call(entry,"finallyLoc");if(hasCatch&&hasFinally){if(this.prev<entry.catchLoc)return handle(entry.catchLoc,!0);if(this.prev<entry.finallyLoc)return handle(entry.finallyLoc)}else if(hasCatch){if(this.prev<entry.catchLoc)return handle(entry.catchLoc,!0)}else{if(!hasFinally)throw new Error("try statement without catch or finally");if(this.prev<entry.finallyLoc)return handle(entry.finallyLoc)}}}},abrupt:function abrupt(type,arg){for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i];if(entry.tryLoc<=this.prev&&hasOwn.call(entry,"finallyLoc")&&this.prev<entry.finallyLoc){var finallyEntry=entry;break}}finallyEntry&&("break"===type||"continue"===type)&&finallyEntry.tryLoc<=arg&&arg<=finallyEntry.finallyLoc&&(finallyEntry=null);var record=finallyEntry?finallyEntry.completion:{};return record.type=type,record.arg=arg,finallyEntry?(this.method="next",this.next=finallyEntry.finallyLoc,ContinueSentinel):this.complete(record)},complete:function complete(record,afterLoc){if("throw"===record.type)throw record.arg;return"break"===record.type||"continue"===record.type?this.next=record.arg:"return"===record.type?(this.rval=this.arg=record.arg,this.method="return",this.next="end"):"normal"===record.type&&afterLoc&&(this.next=afterLoc),ContinueSentinel},finish:function finish(finallyLoc){for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i];if(entry.finallyLoc===finallyLoc)return this.complete(entry.completion,entry.afterLoc),resetTryEntry(entry),ContinueSentinel}},catch:function _catch(tryLoc){for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i];if(entry.tryLoc===tryLoc){var record=entry.completion;if("throw"===record.type){var thrown=record.arg;resetTryEntry(entry)}return thrown}}throw new Error("illegal catch attempt")},delegateYield:function delegateYield(iterable,resultName,nextLoc){return this.delegate={iterator:values(iterable),resultName:resultName,nextLoc:nextLoc},"next"===this.method&&(this.arg=void 0),ContinueSentinel}},exports}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg),value=info.value}catch(error){return void reject(error)}info.done?resolve(value):Promise.resolve(value).then(_next,_throw)}function useSvgAnnotation_slicedToArray(arr,i){return function useSvgAnnotation_arrayWithHoles(arr){if(Array.isArray(arr))return arr}(arr)||function useSvgAnnotation_iterableToArrayLimit(arr,i){var _i=null==arr?null:"undefined"!=typeof Symbol&&arr[Symbol.iterator]||arr["@@iterator"];if(null!=_i){var _s,_e,_x,_r,_arr=[],_n=!0,_d=!1;try{if(_x=(_i=_i.call(arr)).next,0===i){if(Object(_i)!==_i)return;_n=!1}else for(;!(_n=(_s=_x.call(_i)).done)&&(_arr.push(_s.value),_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{if(!_n&&null!=_i.return&&(_r=_i.return(),Object(_r)!==_r))return}finally{if(_d)throw _e}}return _arr}}(arr,i)||function useSvgAnnotation_unsupportedIterableToArray(o,minLen){if(!o)return;if("string"==typeof o)return useSvgAnnotation_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return useSvgAnnotation_arrayLikeToArray(o,minLen)}(arr,i)||function useSvgAnnotation_nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function useSvgAnnotation_arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}var styles_templateObject,styles_templateObject2,hooks_useSvgAnnotation=function useSvgAnnotation(styleOption){var ref=Object(react.useRef)(null),_useState2=useSvgAnnotation_slicedToArray(Object(react.useState)(Tools.Pen),2),tool=_useState2[0],setTool=_useState2[1],_useState4=useSvgAnnotation_slicedToArray(Object(react.useState)([]),2),annotation=_useState4[0],setAnnotation=_useState4[1],_useDrawing=hooks_useDrawing(ref,styleOption),currentPath=_useDrawing.currentPath,onDrawStart=_useDrawing.onDrawStart,onDrawProceed=_useDrawing.onDrawProceed,onDrawEnd=_useDrawing.onDrawEnd,clearDrawing=_useDrawing.clearDrawing,_useShape=hooks_useShape(ref,styleOption),currentShape=_useShape.currentShape,shapeControl=_useShape.shapeControl,addShape=_useShape.addShape,focusShape=_useShape.focusShape,controlShape=_useShape.controlShape,clearShape=_useShape.clearShape,changeTool=Object(react.useCallback)((function(value){tool===Tools.Pointer?clearShape():tool===Tools.Pen&&clearDrawing(),setTool(value)}),[clearShape,clearDrawing,tool]),toSvgString=Object(react.useCallback)((function(){return ref.current?ref.current.outerHTML:null}),[]),download=Object(react.useCallback)(function(){var _ref=function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(void 0)}))}}(_regeneratorRuntime().mark((function _callee(type){var fileName,svgString,blob,url,_ref$current$clientWi,_ref$current,_ref$current$clientHe,_ref$current2,width,height,link;return _regeneratorRuntime().wrap((function _callee$(_context){for(;;)switch(_context.prev=_context.next){case 0:if(fileName="image"+ImageExtension[type],!(svgString=toSvgString())){_context.next=18;break}if(blob=new Blob([svgString],{type:"image/svg+xml;charset=utf-8"}),url=URL.createObjectURL(blob),type===ImageType.SVG){_context.next=11;break}return width=null!==(_ref$current$clientWi=null===(_ref$current=ref.current)||void 0===_ref$current?void 0:_ref$current.clientWidth)&&void 0!==_ref$current$clientWi?_ref$current$clientWi:400,height=null!==(_ref$current$clientHe=null===(_ref$current2=ref.current)||void 0===_ref$current2?void 0:_ref$current2.clientHeight)&&void 0!==_ref$current$clientHe?_ref$current$clientHe:400,_context.next=10,new Promise((function(resolve){var image=new Image;image.onload=function(){var canvas=document.createElement("canvas");canvas.width=width,canvas.height=height;var context=canvas.getContext("2d");context&&(context.fillStyle="#fff",context.fillRect(0,0,width,height),context.drawImage(image,0,0)),resolve(canvas.toDataURL(CanvasImageMap[type])),canvas.remove()},image.src=url}));case 10:url=_context.sent;case 11:(link=document.createElement("a")).href=url,link.setAttribute("download",fileName),link.click(),link.remove(),_context.next=19;break;case 18:throw new Error("No SVG Data");case 19:case"end":return _context.stop()}}),_callee)})));return function(_x2){return _ref.apply(this,arguments)}}(),[toSvgString]),onEventStart=Object(react.useCallback)((function(e){if(e.preventDefault(),e.stopPropagation(),tool===Tools.Pointer)focusShape(e,(function(id){return annotation.find((function(value){return value.id===id}))}));else if(tool===Tools.Eraser){var id=e.target.id;setAnnotation(Object(immer_esm.a)((function(draft){var index=draft.findIndex((function(value){return value.id===id}));-1!==index&&draft.splice(index,1)})))}else tool===Tools.Pen?onDrawStart():setAnnotation(Object(immer_esm.a)((function(draft){var shape=addShape(e,tool);shape&&draft.push(shape)})))}),[tool,addShape,focusShape,onDrawStart,annotation]),onEventProceed=Object(react.useCallback)((function(e){e.preventDefault(),e.stopPropagation(),tool===Tools.Pen?onDrawProceed(e):tool===Tools.Pointer&&controlShape(e)}),[tool,onDrawProceed,controlShape]),onEventComplete=Object(react.useCallback)((function(e){e.preventDefault(),e.stopPropagation(),tool===Tools.Pen?onDrawEnd((function(value){setAnnotation(Object(immer_esm.a)((function(draft){draft.push(value)})))})):tool===Tools.Pointer&&clearShape((function(currentShape){setAnnotation(Object(immer_esm.a)((function(draft){var index=draft.findIndex((function(value){return value.id===currentShape.id}));draft[index]=currentShape})))}))}),[tool,onDrawEnd,clearShape]);return{svgProps:Object(react.useMemo)((function(){return{ref:ref,tool:tool,annotation:annotation,currentSVGObject:tool===Tools.Pen?currentPath:currentShape,shapeControl:shapeControl,onMouseDown:onEventStart,onMouseMove:onEventProceed,onMouseLeave:onEventComplete,onMouseUp:onEventComplete,onTouchStart:onEventStart,onTouchMove:onEventProceed,onTouchEnd:onEventComplete}}),[annotation,shapeControl,currentPath,tool,currentShape,onEventStart,onEventProceed,onEventComplete]),tool:tool,changeTool:changeTool,download:download,toSvgString:toSvgString}};__webpack_require__("./node_modules/core-js/modules/es.object.keys.js"),__webpack_require__("./node_modules/core-js/modules/es.array.index-of.js");function styles_taggedTemplateLiteralLoose(strings,raw){return raw||(raw=strings.slice(0)),strings.raw=raw,strings}var SVG=emotion_styled_browser_esm.a.svg(styles_templateObject||(styles_templateObject=styles_taggedTemplateLiteralLoose(["\n  touch-action: none;\n  > * {\n    cursor: ",";\n  }\n"])),(function(_ref){var tool=_ref.tool;return tool===Tools.Pointer?"move":tool===Tools.Eraser?"not-allowed":"auto"})),ControlPoint=emotion_styled_browser_esm.a.circle(styles_templateObject2||(styles_templateObject2=styles_taggedTemplateLiteralLoose(["\n  cursor: nwse-resize;\n  stroke: red;\n  fill: red;\n"])));try{SVG.displayName="SVG",SVG.__docgenInfo={description:"",displayName:"SVG",props:{theme:{defaultValue:null,description:"",name:"theme",required:!1,type:{name:"Theme"}},as:{defaultValue:null,description:"",name:"as",required:!1,type:{name:"ElementType<any>"}},tool:{defaultValue:null,description:"",name:"tool",required:!0,type:{name:"enum",value:[{value:"0"},{value:"1"},{value:"2"},{value:"3"},{value:"4"}]}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/svgRenderer/styles.tsx#SVG"]={docgenInfo:SVG.__docgenInfo,name:"SVG",path:"src/components/svgRenderer/styles.tsx#SVG"})}catch(__react_docgen_typescript_loader_error){}try{ControlPoint.displayName="ControlPoint",ControlPoint.__docgenInfo={description:"",displayName:"ControlPoint",props:{theme:{defaultValue:null,description:"",name:"theme",required:!1,type:{name:"Theme"}},as:{defaultValue:null,description:"",name:"as",required:!1,type:{name:"ElementType<any>"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/svgRenderer/styles.tsx#ControlPoint"]={docgenInfo:ControlPoint.__docgenInfo,name:"ControlPoint",path:"src/components/svgRenderer/styles.tsx#ControlPoint"})}catch(__react_docgen_typescript_loader_error){}var jsx_runtime=__webpack_require__("./node_modules/react/jsx-runtime.js"),_excluded=["annotation","currentSVGObject","shapeControl"];function _objectWithoutProperties(source,excluded){if(null==source)return{};var key,i,target=function _objectWithoutPropertiesLoose(source,excluded){if(null==source)return{};var key,i,target={},sourceKeys=Object.keys(source);for(i=0;i<sourceKeys.length;i++)key=sourceKeys[i],excluded.indexOf(key)>=0||(target[key]=source[key]);return target}(source,excluded);if(Object.getOwnPropertySymbols){var sourceSymbolKeys=Object.getOwnPropertySymbols(source);for(i=0;i<sourceSymbolKeys.length;i++)key=sourceSymbolKeys[i],excluded.indexOf(key)>=0||Object.prototype.propertyIsEnumerable.call(source,key)&&(target[key]=source[key])}return target}var SvgRenderer=Object(react.forwardRef)((function(_ref,ref){var _rest$width,_rest$height,annotation=_ref.annotation,currentSVGObject=_ref.currentSVGObject,shapeControl=_ref.shapeControl,rest=_objectWithoutProperties(_ref,_excluded),renderItem=Object(react.useCallback)((function(value){return(null==value?void 0:value.tool)===Tools.Pen?Object(react.createElement)("path",Object.assign({},value.data,{id:value.id,key:value.id})):(null==value?void 0:value.tool)===Tools.Rectangle?Object(react.createElement)("rect",Object.assign({},value.data,{id:value.id,key:value.id})):(null==value?void 0:value.tool)===Tools.Ellipse?Object(react.createElement)("ellipse",Object.assign({},value.data,{id:value.id,key:value.id})):null}),[]),renderShapeControl=Object(react.useMemo)((function(){if(!shapeControl)return null;var point=shapeControl.point,translate=shapeControl.translate;return Object(jsx_runtime.jsx)(ControlPoint,{id:"shapeControl",cx:point.x,cy:point.y,r:3,transform:translate?"translate("+translate.x+","+translate.y+")":void 0})}),[shapeControl]);return Object(jsx_runtime.jsxs)(SVG,Object.assign({},rest,{ref:ref,version:"1.1",xmlns:"http://www.w3.org/2000/svg",width:null!==(_rest$width=rest.width)&&void 0!==_rest$width?_rest$width:"400px",height:null!==(_rest$height=rest.height)&&void 0!==_rest$height?_rest$height:"400px",children:[annotation.map((function(value){return value.id===(null==currentSVGObject?void 0:currentSVGObject.id)?null:renderItem(value)})),renderItem(currentSVGObject),renderShapeControl]}))}));SvgRenderer.displayName="SvgRenderer";var svgRenderer=SvgRenderer;try{SvgRenderer.displayName="SvgRenderer",SvgRenderer.__docgenInfo={description:"",displayName:"SvgRenderer",props:{tool:{defaultValue:null,description:"",name:"tool",required:!0,type:{name:"enum",value:[{value:"0"},{value:"1"},{value:"2"},{value:"3"},{value:"4"}]}},annotation:{defaultValue:null,description:"",name:"annotation",required:!0,type:{name:"Annotation"}},currentSVGObject:{defaultValue:null,description:"",name:"currentSVGObject",required:!0,type:{name:"SVGObject | null"}},shapeControl:{defaultValue:null,description:"",name:"shapeControl",required:!0,type:{name:"ShapeControl | null"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/svgRenderer/index.tsx#SvgRenderer"]={docgenInfo:SvgRenderer.__docgenInfo,name:"SvgRenderer",path:"src/components/svgRenderer/index.tsx#SvgRenderer"})}catch(__react_docgen_typescript_loader_error){}function svgAnnotation_regeneratorRuntime(){svgAnnotation_regeneratorRuntime=function _regeneratorRuntime(){return exports};var exports={},Op=Object.prototype,hasOwn=Op.hasOwnProperty,defineProperty=Object.defineProperty||function(obj,key,desc){obj[key]=desc.value},$Symbol="function"==typeof Symbol?Symbol:{},iteratorSymbol=$Symbol.iterator||"@@iterator",asyncIteratorSymbol=$Symbol.asyncIterator||"@@asyncIterator",toStringTagSymbol=$Symbol.toStringTag||"@@toStringTag";function define(obj,key,value){return Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}),obj[key]}try{define({},"")}catch(err){define=function define(obj,key,value){return obj[key]=value}}function wrap(innerFn,outerFn,self,tryLocsList){var protoGenerator=outerFn&&outerFn.prototype instanceof Generator?outerFn:Generator,generator=Object.create(protoGenerator.prototype),context=new Context(tryLocsList||[]);return defineProperty(generator,"_invoke",{value:makeInvokeMethod(innerFn,self,context)}),generator}function tryCatch(fn,obj,arg){try{return{type:"normal",arg:fn.call(obj,arg)}}catch(err){return{type:"throw",arg:err}}}exports.wrap=wrap;var ContinueSentinel={};function Generator(){}function GeneratorFunction(){}function GeneratorFunctionPrototype(){}var IteratorPrototype={};define(IteratorPrototype,iteratorSymbol,(function(){return this}));var getProto=Object.getPrototypeOf,NativeIteratorPrototype=getProto&&getProto(getProto(values([])));NativeIteratorPrototype&&NativeIteratorPrototype!==Op&&hasOwn.call(NativeIteratorPrototype,iteratorSymbol)&&(IteratorPrototype=NativeIteratorPrototype);var Gp=GeneratorFunctionPrototype.prototype=Generator.prototype=Object.create(IteratorPrototype);function defineIteratorMethods(prototype){["next","throw","return"].forEach((function(method){define(prototype,method,(function(arg){return this._invoke(method,arg)}))}))}function AsyncIterator(generator,PromiseImpl){function invoke(method,arg,resolve,reject){var record=tryCatch(generator[method],generator,arg);if("throw"!==record.type){var result=record.arg,value=result.value;return value&&"object"==typeof value&&hasOwn.call(value,"__await")?PromiseImpl.resolve(value.__await).then((function(value){invoke("next",value,resolve,reject)}),(function(err){invoke("throw",err,resolve,reject)})):PromiseImpl.resolve(value).then((function(unwrapped){result.value=unwrapped,resolve(result)}),(function(error){return invoke("throw",error,resolve,reject)}))}reject(record.arg)}var previousPromise;defineProperty(this,"_invoke",{value:function value(method,arg){function callInvokeWithMethodAndArg(){return new PromiseImpl((function(resolve,reject){invoke(method,arg,resolve,reject)}))}return previousPromise=previousPromise?previousPromise.then(callInvokeWithMethodAndArg,callInvokeWithMethodAndArg):callInvokeWithMethodAndArg()}})}function makeInvokeMethod(innerFn,self,context){var state="suspendedStart";return function(method,arg){if("executing"===state)throw new Error("Generator is already running");if("completed"===state){if("throw"===method)throw arg;return doneResult()}for(context.method=method,context.arg=arg;;){var delegate=context.delegate;if(delegate){var delegateResult=maybeInvokeDelegate(delegate,context);if(delegateResult){if(delegateResult===ContinueSentinel)continue;return delegateResult}}if("next"===context.method)context.sent=context._sent=context.arg;else if("throw"===context.method){if("suspendedStart"===state)throw state="completed",context.arg;context.dispatchException(context.arg)}else"return"===context.method&&context.abrupt("return",context.arg);state="executing";var record=tryCatch(innerFn,self,context);if("normal"===record.type){if(state=context.done?"completed":"suspendedYield",record.arg===ContinueSentinel)continue;return{value:record.arg,done:context.done}}"throw"===record.type&&(state="completed",context.method="throw",context.arg=record.arg)}}}function maybeInvokeDelegate(delegate,context){var methodName=context.method,method=delegate.iterator[methodName];if(void 0===method)return context.delegate=null,"throw"===methodName&&delegate.iterator.return&&(context.method="return",context.arg=void 0,maybeInvokeDelegate(delegate,context),"throw"===context.method)||"return"!==methodName&&(context.method="throw",context.arg=new TypeError("The iterator does not provide a '"+methodName+"' method")),ContinueSentinel;var record=tryCatch(method,delegate.iterator,context.arg);if("throw"===record.type)return context.method="throw",context.arg=record.arg,context.delegate=null,ContinueSentinel;var info=record.arg;return info?info.done?(context[delegate.resultName]=info.value,context.next=delegate.nextLoc,"return"!==context.method&&(context.method="next",context.arg=void 0),context.delegate=null,ContinueSentinel):info:(context.method="throw",context.arg=new TypeError("iterator result is not an object"),context.delegate=null,ContinueSentinel)}function pushTryEntry(locs){var entry={tryLoc:locs[0]};1 in locs&&(entry.catchLoc=locs[1]),2 in locs&&(entry.finallyLoc=locs[2],entry.afterLoc=locs[3]),this.tryEntries.push(entry)}function resetTryEntry(entry){var record=entry.completion||{};record.type="normal",delete record.arg,entry.completion=record}function Context(tryLocsList){this.tryEntries=[{tryLoc:"root"}],tryLocsList.forEach(pushTryEntry,this),this.reset(!0)}function values(iterable){if(iterable){var iteratorMethod=iterable[iteratorSymbol];if(iteratorMethod)return iteratorMethod.call(iterable);if("function"==typeof iterable.next)return iterable;if(!isNaN(iterable.length)){var i=-1,next=function next(){for(;++i<iterable.length;)if(hasOwn.call(iterable,i))return next.value=iterable[i],next.done=!1,next;return next.value=void 0,next.done=!0,next};return next.next=next}}return{next:doneResult}}function doneResult(){return{value:void 0,done:!0}}return GeneratorFunction.prototype=GeneratorFunctionPrototype,defineProperty(Gp,"constructor",{value:GeneratorFunctionPrototype,configurable:!0}),defineProperty(GeneratorFunctionPrototype,"constructor",{value:GeneratorFunction,configurable:!0}),GeneratorFunction.displayName=define(GeneratorFunctionPrototype,toStringTagSymbol,"GeneratorFunction"),exports.isGeneratorFunction=function(genFun){var ctor="function"==typeof genFun&&genFun.constructor;return!!ctor&&(ctor===GeneratorFunction||"GeneratorFunction"===(ctor.displayName||ctor.name))},exports.mark=function(genFun){return Object.setPrototypeOf?Object.setPrototypeOf(genFun,GeneratorFunctionPrototype):(genFun.__proto__=GeneratorFunctionPrototype,define(genFun,toStringTagSymbol,"GeneratorFunction")),genFun.prototype=Object.create(Gp),genFun},exports.awrap=function(arg){return{__await:arg}},defineIteratorMethods(AsyncIterator.prototype),define(AsyncIterator.prototype,asyncIteratorSymbol,(function(){return this})),exports.AsyncIterator=AsyncIterator,exports.async=function(innerFn,outerFn,self,tryLocsList,PromiseImpl){void 0===PromiseImpl&&(PromiseImpl=Promise);var iter=new AsyncIterator(wrap(innerFn,outerFn,self,tryLocsList),PromiseImpl);return exports.isGeneratorFunction(outerFn)?iter:iter.next().then((function(result){return result.done?result.value:iter.next()}))},defineIteratorMethods(Gp),define(Gp,toStringTagSymbol,"Generator"),define(Gp,iteratorSymbol,(function(){return this})),define(Gp,"toString",(function(){return"[object Generator]"})),exports.keys=function(val){var object=Object(val),keys=[];for(var key in object)keys.push(key);return keys.reverse(),function next(){for(;keys.length;){var key=keys.pop();if(key in object)return next.value=key,next.done=!1,next}return next.done=!0,next}},exports.values=values,Context.prototype={constructor:Context,reset:function reset(skipTempReset){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(resetTryEntry),!skipTempReset)for(var name in this)"t"===name.charAt(0)&&hasOwn.call(this,name)&&!isNaN(+name.slice(1))&&(this[name]=void 0)},stop:function stop(){this.done=!0;var rootRecord=this.tryEntries[0].completion;if("throw"===rootRecord.type)throw rootRecord.arg;return this.rval},dispatchException:function dispatchException(exception){if(this.done)throw exception;var context=this;function handle(loc,caught){return record.type="throw",record.arg=exception,context.next=loc,caught&&(context.method="next",context.arg=void 0),!!caught}for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i],record=entry.completion;if("root"===entry.tryLoc)return handle("end");if(entry.tryLoc<=this.prev){var hasCatch=hasOwn.call(entry,"catchLoc"),hasFinally=hasOwn.call(entry,"finallyLoc");if(hasCatch&&hasFinally){if(this.prev<entry.catchLoc)return handle(entry.catchLoc,!0);if(this.prev<entry.finallyLoc)return handle(entry.finallyLoc)}else if(hasCatch){if(this.prev<entry.catchLoc)return handle(entry.catchLoc,!0)}else{if(!hasFinally)throw new Error("try statement without catch or finally");if(this.prev<entry.finallyLoc)return handle(entry.finallyLoc)}}}},abrupt:function abrupt(type,arg){for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i];if(entry.tryLoc<=this.prev&&hasOwn.call(entry,"finallyLoc")&&this.prev<entry.finallyLoc){var finallyEntry=entry;break}}finallyEntry&&("break"===type||"continue"===type)&&finallyEntry.tryLoc<=arg&&arg<=finallyEntry.finallyLoc&&(finallyEntry=null);var record=finallyEntry?finallyEntry.completion:{};return record.type=type,record.arg=arg,finallyEntry?(this.method="next",this.next=finallyEntry.finallyLoc,ContinueSentinel):this.complete(record)},complete:function complete(record,afterLoc){if("throw"===record.type)throw record.arg;return"break"===record.type||"continue"===record.type?this.next=record.arg:"return"===record.type?(this.rval=this.arg=record.arg,this.method="return",this.next="end"):"normal"===record.type&&afterLoc&&(this.next=afterLoc),ContinueSentinel},finish:function finish(finallyLoc){for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i];if(entry.finallyLoc===finallyLoc)return this.complete(entry.completion,entry.afterLoc),resetTryEntry(entry),ContinueSentinel}},catch:function _catch(tryLoc){for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i];if(entry.tryLoc===tryLoc){var record=entry.completion;if("throw"===record.type){var thrown=record.arg;resetTryEntry(entry)}return thrown}}throw new Error("illegal catch attempt")},delegateYield:function delegateYield(iterable,resultName,nextLoc){return this.delegate={iterator:values(iterable),resultName:resultName,nextLoc:nextLoc},"next"===this.method&&(this.arg=void 0),ContinueSentinel}},exports}function svgAnnotation_asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg),value=info.value}catch(error){return void reject(error)}info.done?resolve(value):Promise.resolve(value).then(_next,_throw)}var toolMap=[{tool:Tools.Pointer,title:"Pointer"},{tool:Tools.Pen,title:"Pen"},{tool:Tools.Eraser,title:"Eraser"},{tool:Tools.Rectangle,title:"Rectangle"},{tool:Tools.Ellipse,title:"Circle"}],svgAnnotation_SvgAnnotation=function SvgAnnotation(props){var _useSvgAnnotation=hooks_useSvgAnnotation({color:props.color,fillColor:props.fillColor,lineWidth:props.lineWidth}),svgProps=_useSvgAnnotation.svgProps,changeTool=_useSvgAnnotation.changeTool,currentTool=_useSvgAnnotation.tool,download=_useSvgAnnotation.download,_useOutsideClick=hooks_useOutsideClick(),el=_useOutsideClick.el,isOpen=_useOutsideClick.isOpen,close=_useOutsideClick.close,toggle=_useOutsideClick.toggle,dimension=Object(react.useMemo)((function(){var _props$width,_props$height;return{width:null!==(_props$width=props.width)&&void 0!==_props$width?_props$width:400,height:null!==(_props$height=props.height)&&void 0!==_props$height?_props$height:400}}),[props.width,props.height]),handleDownload=Object(react.useCallback)(function(){var _ref=function svgAnnotation_asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){svgAnnotation_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){svgAnnotation_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(void 0)}))}}(svgAnnotation_regeneratorRuntime().mark((function _callee(type){return svgAnnotation_regeneratorRuntime().wrap((function _callee$(_context){for(;;)switch(_context.prev=_context.next){case 0:return console.log("hello"),_context.next=3,download(type);case 3:close();case 4:case"end":return _context.stop()}}),_callee)})));return function(_x){return _ref.apply(this,arguments)}}(),[download,close]),background=Object(react.useMemo)((function(){var _props$backgroundImag;return/^((https?:\/\/)?([\da-z.-]+)\.([a-z.]{2,6})([/\w .-]*)*\/?)|(^(\/[\w .-]+)+\/?)$/.test(null!==(_props$backgroundImag=props.backgroundImage)&&void 0!==_props$backgroundImag?_props$backgroundImag:"")?props.backgroundImage:void 0}),[props.backgroundImage]);return Object(jsx_runtime.jsxs)(Container,{width:dimension.width,children:[Object(jsx_runtime.jsx)("div",{}),Object(jsx_runtime.jsxs)(Toolbar,{children:[toolMap.map((function(_ref2){var tool=_ref2.tool,title=_ref2.title;return Object(jsx_runtime.jsx)(ToolbarButton,{onClick:function onClick(){return changeTool(tool)},isActive:tool===currentTool,children:title},tool)})),Object(jsx_runtime.jsxs)(ToolbarDropDown,{children:[Object(jsx_runtime.jsx)(ToolbarButton,{ref:el,onClick:toggle,children:"Download"}),Object(jsx_runtime.jsxs)(ToolbarDropDownMenu,{isOpen:isOpen,children:[Object(jsx_runtime.jsx)(ToolbarDropdownMenuItem,{onClick:function onClick(){console.log("hello")},children:"SVG"}),Object(jsx_runtime.jsx)(ToolbarDropdownMenuItem,{onClick:function onClick(){return handleDownload(ImageType.PNG)},children:"PNG"}),Object(jsx_runtime.jsx)(ToolbarDropdownMenuItem,{onClick:function onClick(){return handleDownload(ImageType.JPG)},children:"JPG"})]})]})]}),Object(jsx_runtime.jsx)(AnnotationContainer,Object.assign({},dimension,{background:background,children:Object(jsx_runtime.jsx)(svgRenderer,Object.assign({},svgProps,dimension))}))]})};svgAnnotation_SvgAnnotation.displayName="SvgAnnotation",svgAnnotation_SvgAnnotation.defaultProps={color:"black",lineWidth:5,fillColor:"transparent",backgroundImage:void 0};var components_svgAnnotation=svgAnnotation_SvgAnnotation;try{svgAnnotation.displayName="svgAnnotation",svgAnnotation.__docgenInfo={description:"",displayName:"svgAnnotation",props:{backgroundImage:{defaultValue:{value:"undefined"},description:"",name:"backgroundImage",required:!1,type:{name:"string"}},width:{defaultValue:null,description:"",name:"width",required:!1,type:{name:"number"}},height:{defaultValue:null,description:"",name:"height",required:!1,type:{name:"number"}},color:{defaultValue:{value:"black"},description:"",name:"color",required:!1,type:{name:"string"}},lineWidth:{defaultValue:{value:"5"},description:"",name:"lineWidth",required:!1,type:{name:"number"}},fillColor:{defaultValue:{value:"transparent"},description:"",name:"fillColor",required:!1,type:{name:"string"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/svgAnnotation/index.tsx#svgAnnotation"]={docgenInfo:svgAnnotation.__docgenInfo,name:"svgAnnotation",path:"src/components/svgAnnotation/index.tsx#svgAnnotation"})}catch(__react_docgen_typescript_loader_error){}__webpack_exports__.default={component:components_svgAnnotation,title:"SVG Annotation"};var svgAnnotation_stories_Template=function Template(props){return Object(jsx_runtime.jsx)(components_svgAnnotation,Object.assign({},props))};svgAnnotation_stories_Template.displayName="Template";var Basic=svgAnnotation_stories_Template.bind({});Basic.args={color:"black",lineWidth:5,fillColor:"transparent",width:400,height:400};var CustomBackground=svgAnnotation_stories_Template.bind({});CustomBackground.args={color:"black",lineWidth:5,fillColor:"transparent",width:400,height:400,backgroundImage:"https://via.placeholder.com/400"},Basic.parameters=Object.assign({storySource:{source:"(props) => <SvgAnnotation {...props} />"}},Basic.parameters),CustomBackground.parameters=Object.assign({storySource:{source:"(props) => <SvgAnnotation {...props} />"}},CustomBackground.parameters)},"./storybook-init-framework-entry.js":function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);__webpack_require__("./node_modules/@storybook/react/dist/esm/client/index.js")},0:function(module,exports,__webpack_require__){__webpack_require__("./node_modules/@storybook/core-client/dist/esm/globals/polyfills.js"),__webpack_require__("./node_modules/@storybook/core-client/dist/esm/globals/globals.js"),__webpack_require__("./storybook-init-framework-entry.js"),__webpack_require__("./node_modules/@storybook/react/dist/esm/client/docs/config-generated-config-entry.js"),__webpack_require__("./node_modules/@storybook/react/dist/esm/client/preview/config-generated-config-entry.js"),__webpack_require__("./node_modules/@storybook/addon-links/preview.js-generated-config-entry.js"),__webpack_require__("./node_modules/@storybook/addon-docs/preview.js-generated-config-entry.js"),__webpack_require__("./node_modules/@storybook/addon-actions/preview.js-generated-config-entry.js"),__webpack_require__("./node_modules/@storybook/addon-backgrounds/preview.js-generated-config-entry.js"),__webpack_require__("./node_modules/@storybook/addon-measure/preview.js-generated-config-entry.js"),__webpack_require__("./node_modules/@storybook/addon-outline/preview.js-generated-config-entry.js"),__webpack_require__("./node_modules/@storybook/addon-interactions/preview.js-generated-config-entry.js"),__webpack_require__("./.storybook/preview.cjs-generated-config-entry.js"),module.exports=__webpack_require__("./generated-stories-entry.js")},1:function(module,exports){}},[[0,5,6]]]);
//# sourceMappingURL=main.c7db4e68.iframe.bundle.js.map